<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Usage · Open MPI Data</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="index.html"><img class="logo" src="assets/logo.png" alt="Open MPI Data logo"/></a><h1>Open MPI Data</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li class="current"><a class="toctext" href="usage.html">Usage</a><ul class="internal"><li><a class="toctext" href="#Installation-1">Installation</a></li><li><a class="toctext" href="#Example-Reconstruction-1">Example Reconstruction</a></li></ul></li><li><a class="toctext" href="scanners.html">Scanners</a></li><li><a class="toctext" href="tracers.html">Tracers</a></li><li><a class="toctext" href="phantoms.html">Phantoms</a></li><li><a class="toctext" href="sequences.html">Sequences</a></li><li><a class="toctext" href="calibration.html">Calibration</a></li><li><a class="toctext" href="datasets.html">Datasets</a></li><li><a class="toctext" href="reconstructions.html">Reconstruction</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="usage.html">Usage</a></li></ul><a class="edit-page" href="https://github.com/MagneticParticleImaging/OpenMPIData.jl/blob/master/docs/src/usage.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Usage</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Installation-and-Usage-1" href="#Installation-and-Usage-1">Installation and Usage</a></h1><h2><a class="nav-anchor" id="Installation-1" href="#Installation-1">Installation</a></h2><p>The provided MPI data can be read from any programming language like Matlab, Python, Julia, and C. On the <a href="https://github.com/MagneticParticleImaging/MDF">MDF website</a> example scripts for reading MDF data from Matlab, Python, and Julia are available.</p><p>All data can be found under the following <a href="https://media.tuhh.de/ibi/openMPIData/data/">link</a>. To simplify the data download and to provide example reconstructions this project also contains dedicated programming tools. These tools are written in the scientific programming language Julia and can be freely used. They are not strictly necessary if you want to use your own reconstruction methods.</p><p>In order to install the programming tools you first have to install <a href="http://julialang.org/downloads/">Julia</a> in version 1.1 or newer. Then open Julia and enter</p><pre><code class="language-julia">using Pkg
Pkg.add(url=&quot;https://github.com/MagneticParticleImaging/OpenMPIData.jl.git&quot;)</code></pre><p>which will install the package. Then enter</p><pre><code class="language-julia">using OpenMPIData
downloadOpenMPIData()</code></pre><p>The first command will import the OpenMPIData package, the second command will download all MPI data which can last several minutes up to hours depending on the speed of your internet connection.</p><p>The <code>downloadOpenMPIData()</code> function will not download all of the open MPI data. The high resolution MPI system functions need to be manually downloaded using the command</p><pre><code class="language-julia">downloadCalibrationDataHighRes()</code></pre><p>To download the datasets for 1D, 2D, 3D or the system functions individually, use:</p><pre><code class="language-julia"> download1DData()
 download2DData()
 download3DData()
 downloadCalibrationDataLowRes()
 downloadCalibrationDataHighRes()</code></pre><h2><a class="nav-anchor" id="Example-Reconstruction-1" href="#Example-Reconstruction-1">Example Reconstruction</a></h2><p>Once the data is downloaded one can execute one of the example reconstruction scripts. To this end first the reconstruction package <a href="https://github.com/MagneticParticleImaging/MPIReco.jl">MPIReco.jl</a> and the visualization package <a href="https://github.com/JuliaPy/PyPlot.jl">PyPlot.jl</a> need to be installed:</p><pre><code class="language-julia">using Pkg
Pkg.add([&quot;MPIReco&quot;,&quot;PyPlot&quot;])</code></pre><p>Then, the reconstruction script for the 3D excitation can be run by calling</p><pre><code class="language-julia">using OpenMPIData
include(joinpath(OpenMPIData.basedir(), &quot;examples/reco3D.jl&quot;))</code></pre><p>The content of this script is given below</p><pre><code class="language-julia">using PyPlot, MPIReco, OpenMPIData

include(&quot;visualization.jl&quot;)

filenameCalib = joinpath(OpenMPIData.basedir(),&quot;data&quot;,&quot;calibrations&quot;,&quot;3.mdf&quot;)
#filenameCalib = joinpath(OpenMPIData.basedir(),&quot;data&quot;,&quot;calibrations&quot;,&quot;6.mdf&quot;) # High Resolution

for (i,phantom) in enumerate([&quot;shapePhantom&quot;, &quot;resolutionPhantom&quot;, &quot;concentrationPhantom&quot;])

  filenameMeas = joinpath(OpenMPIData.basedir(),&quot;data&quot;,&quot;measurements&quot;,phantom,&quot;3.mdf&quot;)

  # reconstruct data
  c = reconstruction(filenameCalib, filenameMeas, iterations=3, lambd=0.001, bgCorrectionInternal=false,
                   minFreq=80e3, SNRThresh=2.0, recChannels=1:3, frames=1:1000, nAverages=1000)

  mkpath( joinpath(OpenMPIData.basedir(),&quot;data/reconstructions/$(phantom)&quot;))
  s = size(c)[2:4]
  
  # visualization
  if phantom ==&quot;shapePhantom&quot;
    filenameImage = joinpath(OpenMPIData.basedir(),&quot;data&quot;,&quot;reconstructions&quot;,&quot;$phantom&quot;,&quot;reconstruction3D.png&quot;)
    showMIPs(c[1,:,:,:,1],filename=filenameImage,fignum=i)
  elseif phantom ==&quot;resolutionPhantom&quot;
    slice=[div(s[1]+1,2),div(s[2]+1,2),div(s[3]+1,2)]
    filenameImage = joinpath(OpenMPIData.basedir(),&quot;data&quot;,&quot;reconstructions&quot;,&quot;$phantom&quot;,&quot;reconstruction3D.png&quot;)
    showSlices(c[1,:,:,:,1],slice,filename=filenameImage, fignum=i)
  elseif phantom ==&quot;concentrationPhantom&quot;
    slice1 = [div(s[1],3)+1,div(s[2],3)+1,div(s[3],3)+1]
    slice2 = [2*div(s[1],3)+1,2*div(s[2],3)+1,2*div(s[3],3)+1]
    filenameImage = joinpath(OpenMPIData.basedir(),&quot;data&quot;,&quot;reconstructions&quot;,&quot;$phantom&quot;,&quot;reconstruction3D_1.png&quot;)
    showSlices(c[1,:,:,:,1],slice1,filename=filenameImage,fignum=i)
    filenameImage = joinpath(OpenMPIData.basedir(),&quot;data&quot;,&quot;reconstructions&quot;,&quot;$phantom&quot;,&quot;reconstruction3D_2.png&quot;)
    showSlices(c[1,:,:,:,1],slice2,filename=filenameImage,fignum=i+1)
  end
end</code></pre><p>Within the script all three datasets are reconstructed and visualized using <code>PyPlot</code>.  To reconstruct the 1D or the 2D dataset use</p><pre><code class="language-julia">include(joinpath(OpenMPIData.basedir(), &quot;examples/reco1D.jl&quot;))</code></pre><p>or</p><pre><code class="language-julia">include(joinpath(OpenMPIData.basedir(), &quot;examples/reco2D.jl&quot;))</code></pre><footer><hr/><a class="previous" href="index.html"><span class="direction">Previous</span><span class="title">Home</span></a><a class="next" href="scanners.html"><span class="direction">Next</span><span class="title">Scanners</span></a></footer></article></body></html>
